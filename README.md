# 情感分类大作业

## 想说的话

- 其实这份大作业acc貌似也就不到六成的样子，不管啥模型都提升不上去。
- 据说GRU比LSTM好，而且还快
- 据说直接做词嵌入比用训练好的词向量要好（不过也有人说直接做词嵌入容易过拟合）
- 全部输出愤怒可以有47%的准确率

以下为上交作业的内容。

# 运行导引

## 依赖

- pytorch
- torchtext
- scipy
- scikit-learn
- tqdm

对版本无特殊要求。

## 外部文件

在`data`目录下应有如下四个文件：
- `stopwords.txt`：停用词
- `test_data.txt`：训练集
- `train_data.txt`：测试集
- `sgns.merge.word`或`sgns.merge.word.pt`：词向量（`.pt`是torchtext的缓存文件）

**词向量文件没有随代码一起上传，烦请助教运行前先将`sgns.merge.word`或`sgns.merge.word.pt`拷贝到`data`目录下。**

备用：`sgns.merge.word.pt`的[清华云盘链接](https://cloud.tsinghua.edu.cn/f/513bd65fef994ed4a88e/)。

此外，在`models`目录下存有训练好的模型（`mlp.pt`、`cnn.pt`和`lstm.pt`），程序会直接从中加载参数。

## 运行

**将工作目录切换到`src`目录后**，直接执行`mlp.py`、`cnn.py`、`lstm.py`、`bayes.py`即可。

## 结果查看

准确率、F1值和相关系数均直接输出到屏幕。

更具体的结果文件存在`results`目录下，文件名为`模型名_result.txt`，其中存有每份样本的预测结果和相关系数。

（`lstm`由于一开始没经验没存模型，上传前也没来得及收敛到最佳，实际结果可能略低于报告所述。）

## 参考验证时长

以下为在我自己的电脑上进行验证所用时长，其中，词向量已由torchtext预先缓存好。

- `mlp.py`：约30s
- `cnn.py`：约60s
- `lstm.py`：约7min
- `bayes.py`：约30s

## 附录
### 清华大学学生纪律处分管理规定实施细则
#### 第六章　学术不端、违反学习纪律的行为与处分
第二十一条 有下列违反课程学习纪律情形之一的，给予警告以上、留校察看以下处分：

（一）课程作业抄袭严重的；

（二）实验报告抄袭严重或者篡改实验数据的；

（三）期中、期末课程论文抄袭严重的；

（四）在课程学习过程中严重弄虚作假的其他情形。

（不过讲道理这份作业大家的实现不都应该差不多嘛……）